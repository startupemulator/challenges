
Тетрис — самая известная компьютерная игра, её придумал и запрограммировал советский программист А. Л. Пажитнов в 1985 году. 

В «стакан» шириной 10 и высотой 15 клеточек сверху медленно падают разноцветные фигуры. Фигуры составлены из четырёх квадратных клеток таким образом, что каждый квадрат имеет с каким-нибудь другим квадратом общую сторону. 

Фигуры названы в честь букв, на которые похожи: I, J, L, O, S, T, Z. Всего в Тетрисе используется 7 таких фигурок-тетрамино. Цвета такие:

![image](https://github.com/startupemulator/challenges/blob/main/Tetris%20game/7_1.png)

## User Stories

- Случайные фигурки тетрамино падают сверху в прямоугольный стакан шириной 10 и высотой 20 клеток. 
- Во время падения игрок может двигать фигуры по горизонтали (в пределах стакана) клавишами Left и Right, поворачивать их на 90° в разные стороны клавишами Up и Down, и, прицелившись, уронить их на дно стакана, нажав Space.
- Также пользователи могут «сбрасывать» фигурку, то есть ускорять её падение, когда уже решено, куда фигурка должна упасть. 
- Фигурка летит до тех пор, пока не наткнётся на другую фигурку либо на дно стакана. 
- Если при этом заполнился горизонтальный ряд из 10 клеток, он пропадает и всё, что выше него, опускается на одну клетку. 
- Дополнительно показывается фигурка, которая будет следовать после текущей — это подсказка, которая позволяет игроку планировать действия. 
- Темп игры постепенно ускоряется.
- Игра заканчивается, когда новая фигурка не может поместиться в стакан.
- Пользователь получает очки за каждый заполненный ряд, поэтому его задача — заполнять ряды, не заполняя сам стакан (по вертикали) как можно дольше, чтобы таким образом получить как можно больше очков.

## Bonus Features

В 2001 году The Tetris Company выпустила документ The Guideline (Руководство), в котором описаны правила игры, соблюдение которых обязательно для официальных тетрисов. С тех пор произошёл Раскол. Часть игр следуют Руководству, а часть — нет. В этой статье я расскажу основные правила Руководства, и почему эти правила лучше.

**Мгновенное падение**. В классическом тетрисе можно ускорить падение фигуры, зажав кнопку вниз. В гайдлайновом это называется софт-дропом (soft drop), потому что есть еще хард-дроп (hard drop), в котором фигура падает мгновенно. Это ускоряет игру, превращая её в зрелище.

**Предпросмотр фигур**. Для построения стратегии важно знать, какие фигуры идут дальше (next). Современные тетрисы показывают 5 фигур или меньше, в отличие от старых, которые показывали одну.

**Закрепление фигур**. В классическом тетрисе фигуры закреплялись сразу, как касались других фигур. В гайдлайновом это не так. Они замирают мгновенно только при хард-дропе.

**Запас**. Если нажать на кнопку, то текущая фигура отправится в запас (hold), а та фигура, что была там до неё, будет выдана вместо неё. Так можно отложить фигуру, которая сейчас мешается, до лучших времён.

**Повороты**. Для поворотов фигур используется набор правил, который называется супер-системой поворотов (Super Rotation System, SRS). Крутить фигуры можно в обе стороны. Она позволяет различные неочевидные трюки, вроде ти-спинов.

**Начисление очков**. За очистку 4 линий за раз дают больше очков, чем за очистку 3. За ти-спин дают много очков. И всё такое.

**Генератор фигур**. В классическом тетрисе фигуры были в полностью случайном порядке. Решал не только навык игры, но и удача. В гайдлайновых алгоритм такой: все 7 фигур собираются в сумку, которая перемешивается и в этом порядке выдаётся игроку. Когда кончается сумка, генерируется новая. Такой генератор гарантирует, что нужная фигура точно придёт.

**Мультиплеер**. Главная фишка гайдлайнового тетриса. Когда срубаешь линии, оппоненту прилетает мусор, который он должен либо успеть отразить, либо этот мусор появится у него на поле. Начисление очков. За очистку 4 линий за раз дают больше очков, чем за очистку 3. За ти-спин дают много очков. И всё такое.

## **Начисление очков** 

В разных версиях «Тетриса» они довольно разнообразное. Очки могут начисляться за убранные линии, за сброшенные фигурки, за переход на новую скорость и тому подобное. Классические:

**Начисление очков за линии** - количество очков обычно зависит от того, сколько линий убрано за один раз. Например, в китайских «Тетрисах», популярных в СНГ в 1990-х годах, начисление очков обычно было таким: 1 линия — 100 очков, 2 линии — 300 очков, 3 линии — 700 очков, 4 линии (то есть сделать Тетрис) — 1500 очков. То есть чем больше линий убирается за один раз, тем больше отношение количества очков к количеству линий. Любопытно, что тетрисом во многих версиях игры также называется действие, после которого исчезает сразу 4 линии. Это можно сделать только одним способом — сбросить «палку» (фигурку, в которой все клетки расположены на одной линии) в «шахту» ширины 1 и глубины как минимум 4.

**Начисление очков за сброшенные фигурки** - учитываются высота, на которой остановилась фигурка (например, чем ниже, тем лучше), расстояние, которое пролетела фигурка после «сбрасывания» (ускорения падения). Хотя обычно приоритетом являются линии, а за фигурки начисляется относительно небольшое количество очков.
